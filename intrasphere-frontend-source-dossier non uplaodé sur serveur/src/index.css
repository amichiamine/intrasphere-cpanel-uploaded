@tailwind base;
@tailwind components;
@tailwind utilities;

/* Optimisation pour Ã©viter les boucles ResizeObserver */
*, *::before, *::after {
  box-sizing: border-box;
}

:root {
  --background: hsl(0, 0%, 100%);
  --foreground: hsl(220, 14.3%, 4.1%);
  --muted: hsl(210, 40%, 98%);
  --muted-foreground: hsl(215, 16%, 47%);
  --popover: hsl(0, 0%, 100%);
  --popover-foreground: hsl(220, 14.3%, 4.1%);
  --card: hsl(0, 0%, 100%);
  --card-foreground: hsl(220, 14.3%, 4.1%);
  --border: hsl(214, 32%, 91%);
  --input: hsl(214, 32%, 91%);
  --primary: hsl(263, 70%, 50%);
  --primary-foreground: hsl(210, 20%, 98%);
  --secondary: hsl(210, 40%, 96%);
  --secondary-foreground: hsl(222, 84%, 5%);
  --accent: hsl(210, 40%, 96%);
  --accent-foreground: hsl(222, 84%, 5%);
  --destructive: hsl(0, 84%, 60%);
  --destructive-foreground: hsl(210, 20%, 98%);
  --ring: hsl(263, 70%, 50%);
  --radius: 1rem;

  /* Dynamic theme variables */
  --color-primary: #8B5CF6;
  --color-secondary: #A78BFA;
  --base-font-size: 16px;

  /* Custom glass and gradient properties */
  --glass-light: hsla(0, 0%, 100%, 0.1);
  --glass-medium: hsla(0, 0%, 100%, 0.2);
  --glass-card: hsla(0, 0%, 100%, 0.8);
  --gradient-primary: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
  --gradient-secondary: linear-gradient(180deg, hsl(210, 40%, 98%) 0%, hsl(214, 32%, 95%) 100%);
  --gradient-overlay: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
}

.dark {
  --background: hsl(240, 10%, 4%);
  --foreground: hsl(0, 0%, 98%);
  --muted: hsl(240, 4%, 16%);
  --muted-foreground: hsl(240, 5%, 65%);
  --popover: hsl(240, 10%, 4%);
  --popover-foreground: hsl(0, 0%, 98%);
  --card: hsl(240, 10%, 4%);
  --card-foreground: hsl(0, 0%, 98%);
  --border: hsl(240, 4%, 16%);
  --input: hsl(240, 4%, 16%);
  --primary: hsl(263, 70%, 50%);
  --primary-foreground: hsl(210, 20%, 98%);
  --secondary: hsl(240, 4%, 16%);
  --secondary-foreground: hsl(0, 0%, 98%);
  --accent: hsl(240, 4%, 16%);
  --accent-foreground: hsl(0, 0%, 98%);
  --destructive: hsl(0, 63%, 31%);
  --destructive-foreground: hsl(0, 0%, 98%);
  --ring: hsl(263, 70%, 50%);
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 text-foreground;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    font-size: var(--base-font-size);
  }
}

@layer components {
  /* Dynamic color utilities */
  .bg-primary-dynamic {
    background-color: var(--color-primary);
  }
  
  .text-primary-dynamic {
    color: var(--color-primary);
  }
  
  .border-primary-dynamic {
    border-color: var(--color-primary);
  }
  
  .bg-secondary-dynamic {
    background-color: var(--color-secondary);
  }
  
  /* Dynamic gradient for buttons and cards */
  .bg-gradient-dynamic {
    background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
  }

  .glass-effect {
    background: var(--glass-light);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-medium);
  }

  .glass-card {
    background: var(--glass-card);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-medium);
  }

  .gradient-bg {
    background: var(--gradient-primary);
  }

  .gradient-overlay {
    background: var(--gradient-overlay);
  }

  .sidebar-gradient {
    background: var(--gradient-secondary);
  }

  /* Updated Tailwind primary colors to use dynamic vars */
  .bg-primary {
    background-color: var(--color-primary) !important;
  }
  
  .text-primary {
    color: var(--color-primary) !important;
  }
  
  .border-primary {
    border-color: var(--color-primary) !important;
  }
  
  .ring-primary {
    --tw-ring-color: var(--color-primary) !important;
  }
  
  .hover\:bg-primary:hover {
    background-color: var(--color-primary) !important;
  }

  .hover-lift {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .hover-lift:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 20px 25px -5px hsla(0, 0%, 0%, 0.1), 0 10px 10px -5px hsla(0, 0%, 0%, 0.04);
  }

  /* RTL support for Arabic language */
  html[dir="rtl"] {
    direction: rtl;
  }

  html[dir="rtl"] .space-x-2 > :not([hidden]) ~ :not([hidden]) {
    --tw-space-x-reverse: 1;
  }

  html[dir="rtl"] .space-x-3 > :not([hidden]) ~ :not([hidden]) {
    --tw-space-x-reverse: 1;
  }

  html[dir="rtl"] .space-x-4 > :not([hidden]) ~ :not([hidden]) {
    --tw-space-x-reverse: 1;
  }

  html[dir="rtl"] .text-left {
    text-align: right;
  }

  html[dir="rtl"] .text-right {
    text-align: left;
  }

  html[dir="rtl"] .ml-3 {
    margin-left: 0;
    margin-right: 0.75rem;
  }

  html[dir="rtl"] .mr-2 {
    margin-right: 0;
    margin-left: 0.5rem;
  }

  html[dir="rtl"] .lg\\:ml-72 {
    margin-left: 0;
    margin-right: 18rem;
  }

  html[dir="rtl"] .fixed.left-0 {
    left: auto;
    right: 0;
  }

  .pulse-glow {
    animation: pulse-glow 2s infinite;
  }

  @keyframes pulse-glow {
    0%, 100% { 
      box-shadow: 0 0 20px hsla(263, 70%, 50%, 0.3); 
    }
    50% { 
      box-shadow: 0 0 40px hsla(263, 70%, 50%, 0.5); 
    }
  }

  .scroll-smooth {
    scroll-behavior: smooth;
  }
}

@layer utilities {
  .animate-fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }

  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slideUp {
    from { 
      opacity: 0;
      transform: translateY(20px);
    }
    to { 
      opacity: 1;
      transform: translateY(0);
    }
  }
}
